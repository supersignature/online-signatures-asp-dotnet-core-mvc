
@model SuperSignature.MVC.Core.Models.SignatureModel

@{
    Layout = "../Shared/_Layout.cshtml";
}

<style>
    #divResize {
        display: none;
    }
</style>

<div class="row">
    <div id="divResize" class="col-sm-12">
            @Html.Partial("_SignControl", Model)
    </div>
</div>


@section scripts
{
    <script type="text/javascript">

        var resizing = false;
        var isMobile = false;

        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            isMobile = true;
        }

        function Resize() {
            if (resizing) {
                return;
            }

            resizing = true;

            var divResize = $("#divResize");
            var signW = parseInt(divResize.width());
            var signH = "innerHeight" in window ? window.innerHeight : document.documentElement.offsetHeight;

            ResizeSignature("ctlSignature", signW - 20, signH - 120); // make sure the control name matches your id

            setTimeout(function () { ClearSignature("ctlSignature"); }, 100);

            divResize.show();
            resizing = false;
        }

        function AttachEvents() {

            if (isMobile) {

                $(window).on("load orientationchange",
                    function (e) {
                        setTimeout(function () { Resize(); }, 500);
                    });


            } else {

                $(window).on("load resize",
                    function () {
                        setTimeout(function () { Resize(); }, 500);
                    });
            }

        }

        AttachEvents();

    </script>
}