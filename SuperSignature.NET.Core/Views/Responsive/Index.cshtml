
@model SuperSignature.MVC.Core.Models.SignatureModel

@{
    Layout = "../Shared/_Layout.cshtml";
}

<style>

    #divResize {
        height: 75vh;
        width: 95vw;
        background-color: transparent;
        display: none;
    }

    @@media (max-width: 600px) {
        #divResize {
            height: 75vh;
            width: 85vw;
            background-color: transparent;
        }
    }
</style>


<div id="divResize">
    @Html.Partial("_SignControl", Model)
</div>

@section scripts
{
    <script type="text/javascript">

        var resizing = false;
        var isMobile = false;

        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            isMobile = true;
        }

        function Resize() {
            if (resizing) {
                return;
            }
            resizing = true;


            var divResize = $("#divResize");
            var signW = parseInt(divResize.width());
            var signH = parseInt(divResize.height());

            ResizeSignature("ctlSignature", signW, signH); // make sure the control name matches your id

            setTimeout(function () { ClearSignature("ctlSignature"); }, 100);

            divResize.show();
            resizing = false;
        }

        function AttachEvents() {

            if (isMobile) {

                $(window).on("load orientationchange",
                    function (e) {
                        setTimeout(function () { Resize(); }, 500);
                    });


            } else {

                $(window).on("load resize",
                    function () {
                        setTimeout(function () { Resize(); }, 500);
                    });
            }

        }

        AttachEvents();

    </script>
}